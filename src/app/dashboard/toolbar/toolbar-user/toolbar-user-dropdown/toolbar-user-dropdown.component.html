<div *ngIf="user$ | async as user" class="dropdown">
  <div class="dropdown-header" fxLayout="row" fxLayoutAlign="space-between center">
    <div fxLayout="row" fxLayoutAlign="start center">
      <div
        class="dropdown-heading-icon ltr:mr-3 rtl:ml-3"
        fxLayout="row"
        fxLayoutAlign="center center"
      >
        <mat-icon [icIcon]="icPerson"></mat-icon>
      </div>
      <div class="dropdown-heading">
        {{ user.name.firstName + ' ' + user.name.lastName }}
      </div>
    </div>

    <button
      [matMenuTriggerFor]="settingsMenu"
      mat-icon-button
      matTooltip="Settings"
      matTooltipPosition="before"
      type="button"
    >
      <mat-icon [icIcon]="icSettings" class="notifications-header-icon"></mat-icon>
    </button>
  </div>

  <div class="dropdown-content">
    <a
      (click)="onMenuItemClicked(item.id)"
      *ngFor="let item of items; trackBy: trackById"
      class="notification"
      fxLayout="row"
      fxLayoutAlign="start center"
      matRipple
      type="button"
    >
      <mat-icon
        [icIcon]="item.icon"
        [ngClass]="item.colorClass"
        class="rtl:ml-5 ltr:mr-5"
        fxFlex="none"
      ></mat-icon>
      <div fxFlex="auto">
        <div class="notification-label">{{ item.label | translate }}</div>
      </div>
      <mat-icon
        [icIcon]="icChevronRight"
        class="notification-chevron"
        fxFlex="none"
      ></mat-icon>
    </a>
  </div>

  <div class="dropdown-footer" fxLayout="row" fxLayoutAlign="space-between center">
    <mat-slide-toggle
      *ngIf="selectedStyle$ | async as selectedStyle"
      (change)="selectedStyle === Style.dark ? disableDarkMode() : enableDarkMode()"
      [checked]="selectedStyle === Style.dark"
      >{{ 'toolbar.dark_mode' | translate }}</mat-slide-toggle
    >
    <a (click)="close()" [routerLink]="['/account/logout']" color="primary" mat-button>{{
      'toolbar.logout' | translate | capitalize
    }}</a>
  </div>
</div>

<mat-menu #settingsMenu="matMenu" xPosition="before" yPosition="below">
  <button mat-menu-item>
    <mat-icon [icIcon]="icBusiness"></mat-icon>
    <span>Change Address</span>
  </button>

  <button mat-menu-item>
    <mat-icon [icIcon]="icVerifiedUser"></mat-icon>
    <span>Change Username</span>
  </button>

  <button mat-menu-item>
    <mat-icon [icIcon]="icLock"></mat-icon>
    <span>Change Password</span>
  </button>

  <button mat-menu-item>
    <mat-icon [icIcon]="icNotificationsOff"></mat-icon>
    <span>Disable Notifications</span>
  </button>
</mat-menu>
